<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body{
  margin:0;
  background:white;
  font-family:'Inter',sans-serif;
  overflow:hidden;
  user-select:none;
}

canvas{
  position:fixed;
  top:0;
  left:0;
  z-index:0;
}

.content{
  position:relative;
  z-index:1;
  padding-left:10vw;
  padding-top:9vh;
  color:#111;
}

h1{
  font-size:2.4rem;
  font-weight:500;
  letter-spacing:0.12em;
  margin:0;
}

.subtitle{
  margin-top:10px;
  letter-spacing:0.15em;
  font-size:0.9rem;
}

.section{
  margin-top:60px;
  font-size:0.75rem;
  letter-spacing:0.2em;
}

.item{
  margin-top:14px;
  font-size:1rem;
  letter-spacing:0.08em;
  text-decoration:none;
  color:#111;
}

.control-btn{
  margin-top:40px;
  font-size:0.75rem;
  letter-spacing:0.2em;
  background:none;
  border:none;
  cursor:pointer;
  color:#111;
  margin-right:20px;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<div class="content">
  <h1>kinotamag</h1>
  <div class="subtitle">ü•öü•ö ü•ö</div>

  <div class="section">WORKS</div>
  <a href="#" class="item">01</a>
  <a href="#" class="item">02</a>

  <div>
    <button class="control-btn" onclick="freeze()">FREEZE</button>
    <button class="control-btn" onclick="resetCanvas()">RESET</button>
  </div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let mouse = {x:canvas.width/2, y:canvas.height/2};
let pen   = {x:mouse.x, y:mouse.y};
let last  = {x:pen.x, y:pen.y};

const ease = 0.25;

/* ===== Â§™„ÅïÂæ©ÂÖÉ ===== */
const maxWidth = 28;   // ÊúÄÂ§ßÂ∞ë„ÅóÂº∑„ÇÅ
const minWidth = 2.2;  // ÊúÄÁ¥∞„ÇíÂ§™„Åè
let width = maxWidth;

let points = [];

/* ===== PC ===== */
window.addEventListener("mousemove", e=>{
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

/* ===== „Çπ„Éû„ÉõÔºàËá™ÁÑ∂„Å™Â¢®‰πó„ÇäÔºâ ===== */
let touching = false;

window.addEventListener("touchstart", e=>{
  touching = true;
  const t = e.touches[0];

  mouse.x = t.clientX;
  mouse.y = t.clientY;

  // ÁΩÆ„ÅÑ„ÅüÁû¨Èñì„Å´Â¢®„ÇíËá™ÁÑ∂„Å´‰πó„Åõ„Çã
  pen.x = mouse.x;
  pen.y = mouse.y;
  last.x = pen.x;
  last.y = pen.y;

  points.push({x:pen.x, y:pen.y, w:maxWidth});
});

window.addEventListener("touchmove", e=>{
  if(!touching) return;

  const t = e.touches[0];
  const newX = t.clientX;
  const newY = t.clientY;

  const dx = newX - mouse.x;
  const dy = newY - mouse.y;
  const dist = Math.sqrt(dx*dx + dy*dy);

  // Ë£úÈñìÔºà„Ç´„ÇØ„Ç´„ÇØÈò≤Ê≠¢Ôºâ
  const steps = Math.floor(dist / 4);

  for(let i=0;i<steps;i++){
    const ix = mouse.x + dx*(i/steps);
    const iy = mouse.y + dy*(i/steps);
    addPoint(ix, iy);
  }

  mouse.x = newX;
  mouse.y = newY;
});

window.addEventListener("touchend", ()=>{
  touching = false;
  points = [];
});

/* ===== „Éù„Ç§„É≥„ÉàËøΩÂä† ===== */
function addPoint(x,y){
  pen.x = x;
  pen.y = y;
  points.push({x:pen.x, y:pen.y, w:width});
  if(points.length > 30) points.shift();
}

/* ===== ÊèèÁîª ===== */
function draw(){

  pen.x += (mouse.x - pen.x) * ease;
  pen.y += (mouse.y - pen.y) * ease;

  const dx = pen.x - last.x;
  const dy = pen.y - last.y;
  const speed = Math.sqrt(dx*dx + dy*dy);

  let targetWidth = maxWidth - Math.pow(speed*1.4,0.9);
  if(targetWidth < minWidth) targetWidth = minWidth;
  width += (targetWidth - width) * 0.3;

  points.push({x:pen.x, y:pen.y, w:width});
  if(points.length > 30) points.shift();

  if(points.length >= 2){
    for(let i=0;i<points.length-1;i++){
      ctx.beginPath();
      ctx.moveTo(points[i].x, points[i].y);
      ctx.lineTo(points[i+1].x, points[i+1].y);

      ctx.lineWidth = points[i].w;
      ctx.lineCap = "round";
      ctx.strokeStyle = "rgb(0,0,0)";
      ctx.stroke();
    }
  }

  last.x = pen.x;
  last.y = pen.y;

  requestAnimationFrame(draw);
}
draw();

/* ===== FREEZEÔºàÊ≠£„Åó„ÅèÂÖ®ÁîªÈù¢Ôºâ ===== */
function freeze(){
  html2canvas(document.documentElement,{
    width: window.innerWidth,
    height: window.innerHeight,
    scrollX: 0,
    scrollY: 0
  }).then(c=>{
    const link = document.createElement("a");
    link.download = "trail.png";
    link.href = c.toDataURL();
    link.click();
  });
}

function resetCanvas(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  points = [];
}
</script>

</body>
</html>






















