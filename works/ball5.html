<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
body {
  margin: 0;
  overflow: hidden;
  background: white;
}
canvas { display: block; }
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let mouse = { x: canvas.width/2, y: canvas.height/2 };
let pen = { x: mouse.x, y: mouse.y };
let lastPen = { x: pen.x, y: pen.y };

const ease = 0.25;   // 慣性（小さいほど遅れる）
const maxWidth = 30;
const minWidth = 1;

window.addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

function draw() {

  // 仮想ペンがマウスに追従
  pen.x += (mouse.x - pen.x) * ease;
  pen.y += (mouse.y - pen.y) * ease;

  // 本当の速度を計算
  const dx = pen.x - lastPen.x;
  const dy = pen.y - lastPen.y;
  const speed = Math.sqrt(dx*dx + dy*dy);

  // 速度→線幅（速いほど細い）
  let width = maxWidth - speed * 2;
  if (width < minWidth) width = minWidth;

  ctx.beginPath();
  ctx.moveTo(lastPen.x, lastPen.y);
  ctx.lineTo(pen.x, pen.y);
  ctx.lineCap = "round";
  ctx.lineWidth = width;
  ctx.strokeStyle = "black";
  ctx.stroke();

  lastPen.x = pen.x;
  lastPen.y = pen.y;

  requestAnimationFrame(draw);
}

draw();

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
